[package]
name = "jsonrpsee"
description = "JSON-RPC crate"
version = "2.0.0"
authors = ["Pierre Krieger <pierre.krieger1708@gmail.com>"]
license = "MIT"
edition = "2018"

[dependencies]
async-std = { version = "1.7.0", features = ["attributes"] }
bs58 = "0.4.0"
fnv = "1.0.7"
futures = "0.3.8"
globset = "0.4.6"
hashbrown = "0.9.1"
lazy_static = "1.4.0"
log = "0.4.11"
parking_lot = "0.11.1"
pin-project = "1.0.1"
jsonrpsee-proc-macros = { path = "proc-macros" }
rand = "0.7.3"
serde = { version = "1.0.117", default-features = false, features = ["derive"] }
serde_json = "1.0.59"
smallvec = { version = "1.5.0", default-features = false }
thiserror = "1.0.22"

# used for tests and HTTP/hyper
# the features are used only for tests but enabled because `dev-depedencies` are leaked into dependencies.
tokio = { version = "0.2.23", features = ["stream", "rt-threaded", "macros"], optional = true }

# HTTP-related dependencies
hyper = { version = "0.13.9", features = ["stream"], optional = true }
unicase = { version = "2.6.0", optional = true }

# WS-related dependencies
async-tls = { version = "0.10.0", optional = true }
bytes = { version = "0.6.0", optional = true }
soketto = { version = "0.4.2", optional = true }
url = { version = "2.2.0", optional = true }
webpki = { version = "0.21.3", optional = true }

[features]
default = ["http", "ws"]
http = ["hyper", "tokio", "unicase"]
ws = ["async-tls", "bytes", "soketto", "url", "webpki"]

[dev-dependencies]
criterion = "0.3.3"
env_logger = "0.8.1"
jsonrpsee-test-utils = { path = "test-utils" }
num_cpus = "1.13.0"

[[bench]]
name = "benches"
harness = false
